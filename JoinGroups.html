<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.css" />
        <link rel="stylesheet" href="css/style.css" />
        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>
        <script src="js/scripts.js" type="text/javascript"></script>
        <script type="text/javascript">
            
            function createCoursesButtons(userCourses) {
                var mainDiv = document.getElementById("coursesContainer");
                for(var i = 0; i<userCourses.length; i++) {
                    var subDiv = document.createElement("div");
                    var a=document.createElement("a");
                    a.id = "a";
                    a.href="";
                    a.innerHTML = userCourses[i].name;
                    var br = document.createElement("br");
                    var subsubDiv = document.createElement("div");
                    
                    subsubDiv.innerHTML = "Number of mutual friends - not implemented"
                    a.appendChild(br);
                    a.appendChild(subsubDiv);
                    subDiv.appendChild(a);
                    mainDiv.appendChild(subDiv);
                }
                
                $('#coursesContainer div').attr("class", "ui-block-a");
                $('#coursesContainer a').attr("class", "choosen");
                $('#coursesContainer a').attr("data-role", "button");
                $('#coursesContainer a').attr("data-theme", "b");
                $("#a div").attr("class","count_friend");
                
            }
            
             function get() {
                $.ajax({
                    url: 'php/fetchCourses.php',
                    method: 'GET',
                    success: function (data) {
                        var jason = JSON.parse(data);
                        if (jason.success == 1) {
                            createCoursesButtons(jason.userCourses);
                        }
                    },
                    error: function () {
                        alert("error");
                    }
                });
            }
            
            $(document).ready(function() {
                get();
                //setInterval("get()", 5000);
            });
            
        </script>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
    </head>
    <body>
        <div data-role="page" class="ui-responsive-panel">
            <div data-role="header" data-theme="f">
                <a href="#nav-panel" data-icon="bars" data-iconpos="notext">Menu</a>
            </div>
            <div data-role="panel" data-position="left" data-position-fixed="false" data-display="reveal" id="nav-panel" data-theme="a">
                <a href="index.html" data-role="button" data-theme="e" data-icon="home" > My Sheety Week </a><br/>
                <a href="NewTask.html" data-role="button" data-theme="b" data-icon="plus" > Add a Sheet</a><br/>
                <a href="JoinGroups.html" data-role="button" data-theme="b" data-icon="search" > Courses </a><br/>
                <a href="Profile.html" data-role="button"  data-theme="b" data-icon="grid" > Profile </a><br/>
                <a href="Notifications.html" data-role="button"  data-theme="b" data-icon="gear" > Notifications </a><br/>
            </div>
            <div data-role="content">
                <br/>
                <div class="ui-grid-a">
                    <div class="ui-block-a"><input type="search" name="search" id="search-basic" value="" placeholder="Type courses/ teachers/ friends" /></div>
                    <div class="ui-block-b"><a href="NewGroup.html"  data-role="button" data-inline="true" data-theme="c" >+</a></div>
                </div>
                <fieldset data-role="controlgroup" data-type="horizontal" data-mini="true">
                    <input type="radio" name="dur" id="radio-sug" value="1" checked="checked">
                    <label for="radio-sug">Suggested courses</label>
                    <input type="radio" name="dur" id="radio-your" value="0">
                    <label for="radio-your">Your courses</label>
                </fieldset>

                <div class="ui-grid-a" id="coursesContainer">
<!--                    <div class="ui-block-a"><a href="" onclick = "transferToGroupDetails(this)" data-role="button" class="choosen" data-theme="b">יסודות המימון<br/><div class="count_friend">40 of your friends</div></a></div>
                    <div class="ui-block-a"><a href="" data-role="button" class="choosen" data-theme="b">Automata and Formal Languages<br/><div class="count_friend">40 of your friends</div></a></div>
                    <div class="ui-block-a"><a href="" data-role="button" class="choosen" data-theme="b">מאקרו כלכלה<br/><div class="count_friend">30 of your friends</div></a></div>
                    <div class="ui-block-a"><a href="" data-role="button" class="choosen" data-theme="b">Probability<br/><div class="count_friend">10 of your friends</div></a></div>
                    <div class="ui-block-a"><a href="" data-role="button" class="choosen" data-theme="b">Set Theory<br/><div class="count_friend">3 of your friends</div></a></div>
                    <div class="ui-block-a"><a href="" data-role="button" class="choosen" data-theme="b">מבוא למדעי כדור הארץ<br/><div class="count_friend">13 of your friends</div></a></div>-->
                </div>

                <a href="index.html" data-role="button"  data-theme="d">Join</a>
            </div>
        </div>
        <script>
            $('.choosen').on('click', function() {
                var $this = $(this);
                if ($this.hasClass('clicked')) {
                    $this.removeAttr('style').removeClass('clicked');
                } else {
                    $this.css('background', '#7fc242').addClass('clicked');
                }
            });
            
            
        </script>
    </body>
</html>
