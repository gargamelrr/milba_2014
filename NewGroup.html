<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.css" />
        <link rel="stylesheet" href="css/style.css" />
        <script src="js/scripts.js" type="text/javascript"></script>
        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>
    </head>
    <body>
        <div data-role="page" class="ui-responsive-panel">
            <div data-role="header" data-theme="f">
                <a href="#nav-panel" data-icon="bars" data-iconpos="notext">Menu</a>
            </div>
            <div data-role="panel" data-position="left" data-position-fixed="false" data-display="reveal" id="nav-panel" data-theme="a">
                <a href="index.html" data-role="button" data-theme="e" data-icon="home" > My Sheety Week </a><br/>
                <a href="NewTask.html" data-role="button" data-theme="b" data-icon="plus" > Add a Sheet</a><br/>
                <a href="JoinGroups.html" data-role="button" data-theme="b" data-icon="search" > Courses </a><br/>
                <a href="Profile.html" data-role="button"  data-theme="b" data-icon="grid" > Profile </a><br/>
                <a href="Notifications.html" data-role="button"  data-theme="b" data-icon="gear" > Notifications </a><br/>
            </div>
            <div data-role="content">
                <div id="newGroup">
                    <form id= "insertGroup" method="post">
                        <label>Course name: </label>
                        <input type="text" name="courseName" id="courseName" required/>
                        <label>Teacher name: </label>
                        <input type="text" name="teacherName" id="teacherName" required/>
                        <label>Teacher e-mail (optional): </label>
                        <input type="text" name="teacherEmail" id="teacherEmail" />
                        <fieldset data-role="controlgroup" data-type="horizontal" data-mini="true">
                            <legend>Course duration:</legend>
                            <input type="radio" name="dur" id="radio-year" value="1" checked="checked">
                            <label for="radio-year">All Year</label>
                            <input type="radio" name="dur" id="radio-sem" value="0">
                            <label for="radio-sem">Semester</label>
                        </fieldset>
                        <br/>
                        <label>Would you like to add your first sheet?</label>
                        <div data-role="controlgroup" data-type="horizontal" data-mini="true">
                            <input type="radio" name="new" id="radioyes" value="yes" checked="checked">
                            <label for="radio-yes">Yes!</label>
                            <input type="radio" name="new" id="radiono" value="no">
                            <label for="radio-no">No, just submit</label>
                        </div>
                        <input type="submit" value="Publish" id="submit"/>
                    </form>
                </div>
            </div>
        </div>
        <script  type="text/javascript">

            $('#submit').click(function() {
                alert('dude');
                $.ajax({
                    //add full 
                    url: 'http://ronnyuri.milab.idc.ac.il/milab_2014/php/insertGroup.php',
                    method: 'POST',
                    data: {                       
                        courseName: $("#courseName").val(),
                        teacherName: $("#teacherName").val(),
                        duration:  $("input:radio[name=dur]:checked").val(),
                        teacherMail: $("#teacherEmail").val()
                    },
                    success: function(data) {
                        var json = JSON.parse(data);
                        if (json.success == 1) {
                            window.location.href = "index.html";
                        }
                    },
                    error: function() {
                        alert("erroror");
                        alert(data.message);
                    }
                });
            });
        </script>
    </body>
</html>

