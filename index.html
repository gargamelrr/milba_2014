<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.css" />
        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>
        <link rel="stylesheet" href="css/style.css" />
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
        <script>
            $(document).on('pagecreate', function(event) {
                $('#days li').bind('click', function() {
                    $('#days li').attr("data-theme", "c").removeClass("ui-btn-up-b").removeClass('ui-btn-hover-b').addClass("ui-btn-up-c").addClass('ui-btn-hover-c');
                    $(this).attr("data-theme", "b").removeClass("ui-btn-up-c").removeClass('ui-btn-hover-c').addClass("ui-btn-up-b").addClass('ui-btn-hover-b');

                });
            });
        </script>
    </head>
    <body>
        <div data-role="page" class="ui-responsive-panel" >
            <div data-role="header" data-theme="d">
                <a href="#nav-panel" data-icon="bars" data-iconpos="notext">Menu</a>
            </div>
            <div data-role="panel" data-position="left" data-position-fixed="false" data-display="reveal" id="nav-panel" data-theme="a">
                <a href="index.html" data-role="button" data-theme="e" data-icon="home" > My Sheety Week </a><br/>
                <a href="NewTask.html" data-role="button" data-theme="b" data-icon="plus" > Add a Sheet</a><br/>
                <a href="JoinGroups.html" data-role="button" data-theme="b" data-icon="search" > Courses </a><br/>
                <a href="Profile.html" data-role="button"  data-theme="b" data-icon="grid" > Profile </a><br/>
                <a href="Notifications.html" data-role="button"  data-theme="b" data-icon="gear" > Notifications </a><br/>
            </div>

            <div data-role="content">
                <div id="days">
                    <ul data-role="listview" class="ui-listview" id="days-list">
                        <li data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="arrow-r" data-iconpos="right" data-theme="c" class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-li-has-thumb ui-btn-up-c">
                            <div class="ui-btn-inner ui-li" id="day0">
                                <div class="ui-btn-text" >
                                    <img src="" class="ui-li-thumb">
                                    <h3 class="ui-li-heading"></h3>
                                    <p class="ui-li-desc"></p>
                                    <div class="details"></div>
                                </div>
                                <span class="ui-icon ui-icon-arrow-r ui-icon-shadow">&nbsp;</span></div>
                        </li>
                        <li data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="arrow-r" data-iconpos="right" data-theme="c" class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-li-has-thumb ui-btn-up-c">
                            <div class="ui-btn-inner ui-li" id="day1">
                                <div class="ui-btn-text" >
                                    <img src="" class="ui-li-thumb">
                                    <h3 class="ui-li-heading"></h3>
                                    <p class="ui-li-desc"></p>
                                    <div class="details"></div>
                                </div><span class="ui-icon ui-icon-arrow-r ui-icon-shadow">&nbsp;</span></div></li>
                        <li data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="arrow-r" data-iconpos="right" data-theme="c" class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-li-has-thumb ui-btn-up-c">
                            <div class="ui-btn-inner ui-li" id="day2">
                                <div class="ui-btn-text" >
                                    <img src="" class="ui-li-thumb">
                                    <h3 class="ui-li-heading"></h3>
                                    <p class="ui-li-desc"></p>
                                    <div class="details"></div>
                                </div><span class="ui-icon ui-icon-arrow-r ui-icon-shadow">&nbsp;</span></div></li>
                        <li data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="arrow-r" data-iconpos="right" data-theme="c" class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-li-has-thumb ui-btn-up-c">
                            <div class="ui-btn-inner ui-li" id="day3">
                                <div class="ui-btn-text" >
                                    <img src="" class="ui-li-thumb">
                                    <h3 class="ui-li-heading"></h3>
                                    <p class="ui-li-desc"></p>
                                    <div class="details"></div>
                                </div><span class="ui-icon ui-icon-arrow-r ui-icon-shadow">&nbsp;</span></div></li>
                        <li data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="arrow-r" data-iconpos="right" data-theme="c" class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-li-has-thumb ui-btn-up-c">
                            <div class="ui-btn-inner ui-li" id="day4">
                                <div class="ui-btn-text" >
                                    <img src="" class="ui-li-thumb">
                                    <h3 class="ui-li-heading"></h3>
                                    <p class="ui-li-desc"></p>
                                    <div class="details"></div>
                                </div><span class="ui-icon ui-icon-arrow-r ui-icon-shadow">&nbsp;</span></div></li>
                        <li data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="arrow-r" data-iconpos="right" data-theme="c" class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-li-has-thumb ui-btn-up-c">
                            <div class="ui-btn-inner ui-li" id="day5">
                                <div class="ui-btn-text" >
                                    <img src="" class="ui-li-thumb">
                                    <h3 class="ui-li-heading"></h3>
                                    <p class="ui-li-desc"></p>
                                    <div class="details"></div>
                                </div><span class="ui-icon ui-icon-arrow-r ui-icon-shadow">&nbsp;</span></div></li>
                        <li data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="arrow-r" data-iconpos="right" data-theme="c" class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-li-has-thumb ui-btn-up-c">
                            <div class="ui-btn-inner ui-li" id="day6">
                                <div class="ui-btn-text" >
                                    <img src="" class="ui-li-thumb">
                                    <h3 class="ui-li-heading"></h3>
                                    <p class="ui-li-desc"></p>
                                    <div class="details"></div>
                                </div><span class="ui-icon ui-icon-arrow-r ui-icon-shadow">&nbsp;</span></div></li>
                        <li data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="arrow-r" data-iconpos="right" data-theme="c" class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-li-has-thumb ui-btn-up-c">
                            <div class="ui-btn-inner ui-li" id="day7">
                                <div class="ui-btn-text" >
                                    <img src="" class="ui-li-thumb">
                                    <h3 class="ui-li-heading"></h3>
                                    <p class="ui-li-desc"></p>
                                    <div class="details"></div>
                                </div><span class="ui-icon ui-icon-arrow-r ui-icon-shadow">&nbsp;</span></div></li>

                    </ul>
                </div>
            </div>
        </div>

        <script  type="text/javascript">
            $('.details').hide();
            $('.ui-btn-text').click(function() {
                $(this).find('.details').slideToggle(500);
            });

            $.ajax({
                url: 'http://ronnyuri.milab.idc.ac.il/milab_2014/php/viewWeek.php',
                method: 'POST',
                data: {
                    //todo
                },
                success: function(data) {
                    var json = JSON.parse(data);
                    var day = 0;
                    $.each(json.data, function(i, val) {
                        $("#day" + day + " h3").append(json.data[i].date);
                        if (json.data[i].tasks.count > 0) {
                            $.each(json.data[i].tasks.data, function(j, val) {
                                if (j + 1 == json.data[i].tasks.count) {
                                    $("#day" + day + " p").append(json.data[i].tasks.data[j].course_name);
                                    $("#day" + day + " .details").append("<b><u>" + json.data[i].tasks.data[j].course_name + "</u><br/><br/>" +
                                            json.data[i].tasks.data[j].task_name + "</b><br/><br/>" + json.data[i].tasks.data[j].due_date);
                                } else {
                                    $("#day" + day + " p").append(json.data[i].tasks.data[j].course_name + ",");
                                    $("#day" + day + " .details").append("<b><u>" + json.data[i].tasks.data[j].course_name + "</u><br/><br/>" +
                                            json.data[i].tasks.data[j].task_name + "</b><br/><br/>" + json.data[i].tasks.data[j].due_date + "<br/><hr>");
                                }
                                if (json.data[i].tasks.count < 2) {
                                    $("#day" + day + " img").attr("src", "images/easy.png")
                                } else {
                                    $("#day" + day + " img").attr("src", "images/hard.png")
                                }
                            });
                        } else {
                            $("#day" + day + " img").attr("src", "images/fun.png")
                        }
                        day++;
                    });
                    if (json.count == 0) {
                        //popup - empty cal
                    }

                },
                error: function() {
                }
            });

        </script>
    </body>
</html>
